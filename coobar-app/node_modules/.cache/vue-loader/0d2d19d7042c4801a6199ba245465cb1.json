{"remainingRequest":"c:\\Users\\web\\Desktop\\coobar1\\coobar-app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!c:\\Users\\web\\Desktop\\coobar1\\coobar-app\\src\\views\\cart.vue?vue&type=script&lang=js&","dependencies":[{"path":"c:\\Users\\web\\Desktop\\coobar1\\coobar-app\\src\\views\\cart.vue","mtime":1550064016518},{"path":"c:\\Users\\web\\Desktop\\coobar1\\coobar-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"c:\\Users\\web\\Desktop\\coobar1\\coobar-app\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"c:\\Users\\web\\Desktop\\coobar1\\coobar-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"c:\\Users\\web\\Desktop\\coobar1\\coobar-app\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nexport default {\r\n     components:{\r\n\r\n     },\r\n     data(){\r\n         return {\r\n              products:[],\r\n              isAllSelected:false,\r\n              sum:0,\r\n         }\r\n     },\r\n     created(){\r\n         this.queryCart();\r\n     },\r\n     methods:{\r\n        //  点击按钮，确定购买的商品\r\n         selectBox(){\r\n             var isTrue=true;\r\n                for(var i=0;i<this.products.length;i++){\r\n                        isTrue=isTrue&this.products[i].isSelected;\r\n                    };\r\n                this.isAllSelected=isTrue;\r\n         },\r\n        //  查询购物车\r\n        queryCart(){\r\n             this.axios.get(\"http://localhost:3000/queryCart\").then((res)=>{\r\n                    if(res.data.code==-1){\r\n                         this.$router.push(\"/login\");\r\n                    }else if(res.data.code==1){\r\n                         this.products=res.data.msg;\r\n                         for(var i=0;i<this.products.length;i++){\r\n                              this.products[i].isSelected=false;\r\n                         }\r\n                    }\r\n            })    \r\n        },\r\n        // 修改购物车商品数量\r\n        addCount(e){\r\n            var index=parseInt(e.target.dataset.index);\r\n            var step=parseInt(e.target.dataset.step);\r\n            var cid=this.products[index].cid;\r\n            this.products[index].count+=step;\r\n            if(this.products[index].count<1){\r\n                this.products[index].count=1\r\n            };\r\n            if(this.products[index].count>99){\r\n                this.products[index].count=99;\r\n            };\r\n            var count=this.products[index].count;\r\n            this.axios.get(\"http://localhost:3000/updateCart\",{\r\n                params:{count,cid}\r\n            }).then((res)=>{\r\n                 if(res.data.code==-1){\r\n                      this.$router.push(\"/login\");\r\n                 }\r\n            })\r\n        },\r\n        // 删除商品\r\n          remove(e){\r\n               var index=parseInt(e.target.dataset.index);\r\n               var cid=this.products[index].cid;\r\n               this.products.splice(index,1);\r\n               this.axios.get(\"http://localhost:3000/deleteCart\",{\r\n                   params:{cid}\r\n               }).then((res)=>{\r\n                   if(res.data.code==-1){\r\n                       this.$router.push(\"/login\")\r\n                   }\r\n               }) \r\n          },\r\n     },\r\n     watch:{\r\n           isAllSelected(){\r\n                 if(this.isAllSelected){\r\n                      for(var i=0;i<this.products.length;i++){\r\n                        this.products[i].isSelected=this.isAllSelected; \r\n                        this.sum+=this.products[i].new_price*this.products[i].count;\r\n                      }\r\n                 }else{\r\n                        this.sum=0;\r\n                        };\r\n           },\r\n     },\r\n    //  计算属性\r\n    computed:{\r\n       \r\n    }\r\n}\r\n",{"version":3,"sources":["cart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"cart.vue","sourceRoot":"src\\views","sourcesContent":["<template>\r\n    <div class=\"app-cart\">\r\n          <div class=\"cart\">\r\n    <div class=\"cart_top\">\r\n        <p class=\"top_item top_item1\">\r\n            <a href=\"javascript:;\">全部商品</a>\r\n            <a href=\"javascript:;\">降价商品</a>\r\n            <a href=\"javascript:;\">库存紧张</a>\r\n        </p>\r\n        <p class=\"top_item top_item2\">\r\n            <input type=\"checkbox\" class=\"item2_son item2_son1\"  v-model=\"isAllSelected\">全选\r\n            <span class=\"item2_son item2_son2\">商品信息</span>\r\n\t\t\t\t\t\t<span class=\"item2_son item2_son3\">商品规格</span>\r\n            <span class=\"item2_son item2_son4\">商品单价</span>\r\n            <span class=\"item2_son item2_son5\">商品数量</span>\r\n            <span class=\"item2_son item2_son6\">商品金额</span>\r\n            <span class=\"item2_son item2_son7\">更多操作</span>\r\n        </p>\r\n    </div>\r\n    <ul class=\"cart_main\">\r\n\t\t<li class=\"cart_product\" v-for=\"(product,index) of products\" :key=\"index\">\r\n            <div class=\"product\">\r\n\t\t\t\t<div class=\"product-item1\">\r\n\t\t\t\t\t<input type=\"checkbox\" v-model=\"product.isSelected\" @click=\"selectBox\">\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"product-item product-item2\">\r\n\t\t\t\t\t<img :src=\"`http://localhost:3000/${product.img_src}`\" alt=\"\">\r\n\t\t\t\t</div >\r\n\t\t\t\t<div class=\"product-item product-item3\">\r\n\t\t\t\t\t<p>{{product.title}}</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"product-item product-item4\">\r\n\t\t\t\t\t<p></p>\t\t\t      \r\n\t\t\t\t</div>\r\n                <div class=\"product-item product-item5\">\r\n                    <p class=\"new_price\" v-show=\"product.new_price\">现价:{{product.new_price}}</p>\r\n                    <p class=\"old_price\" v-show=\"product.old_price\">原价:{{product.old_price}}</p>\r\n                </div>\r\n                <div class=\"product-item product-item6\">\r\n                    <button class=\"count\" @click=\"addCount\" data-step=\"-1\" :data-index=\"index\">-</button>\r\n                    <input type=\"text\" v-model=\"product.count\">\r\n                    <button class=\"count\" @click=\"addCount\" data-step=\"1\" :data-index=\"index\">+</button>\r\n                </div>\r\n\t\t\t\t<div class=\"product-item product-item7\">\r\n\t\t\t\t\t<span>￥:73.00</span>\r\n\t\t\t\t</div>\r\n                <div class=\"product-item product-item8\">\r\n                    <p>加入收藏夹</p>\r\n                    <p @click=\"remove\" :data-index=\"index\">删除</p>\r\n                </div>\r\n            </div>\r\n        </li>\r\n    </ul>\r\n    <div class=\"cart-bottom\">\r\n\t\t<div class=\"cart-item cart-item1\">\r\n\t\t\t<input type=\"checkbox\" v-model=\"isAllSelected\">全选\r\n\t\t</div>\r\n        <span class=\"cart-item cart-item2\">删除</span>\r\n        <span class=\"cart-item cart-item3\">移入收藏夹</span>\r\n        <span class=\"cart-item cart-item4\">分享</span>\r\n        <span class=\"cart-item cart-item5\">总计商品 <span>{{products.length}}</span> 件</span>\r\n        <span class=\"cart-item cart-item6\">合计: <span>￥{{sum}}</span></span>\r\n        <span class=\"cart-item cart-item7\">结算</span>\r\n    </div>\r\n</div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n     components:{\r\n\r\n     },\r\n     data(){\r\n         return {\r\n              products:[],\r\n              isAllSelected:false,\r\n              sum:0,\r\n         }\r\n     },\r\n     created(){\r\n         this.queryCart();\r\n     },\r\n     methods:{\r\n        //  点击按钮，确定购买的商品\r\n         selectBox(){\r\n             var isTrue=true;\r\n                for(var i=0;i<this.products.length;i++){\r\n                        isTrue=isTrue&this.products[i].isSelected;\r\n                    };\r\n                this.isAllSelected=isTrue;\r\n         },\r\n        //  查询购物车\r\n        queryCart(){\r\n             this.axios.get(\"http://localhost:3000/queryCart\").then((res)=>{\r\n                    if(res.data.code==-1){\r\n                         this.$router.push(\"/login\");\r\n                    }else if(res.data.code==1){\r\n                         this.products=res.data.msg;\r\n                         for(var i=0;i<this.products.length;i++){\r\n                              this.products[i].isSelected=false;\r\n                         }\r\n                    }\r\n            })    \r\n        },\r\n        // 修改购物车商品数量\r\n        addCount(e){\r\n            var index=parseInt(e.target.dataset.index);\r\n            var step=parseInt(e.target.dataset.step);\r\n            var cid=this.products[index].cid;\r\n            this.products[index].count+=step;\r\n            if(this.products[index].count<1){\r\n                this.products[index].count=1\r\n            };\r\n            if(this.products[index].count>99){\r\n                this.products[index].count=99;\r\n            };\r\n            var count=this.products[index].count;\r\n            this.axios.get(\"http://localhost:3000/updateCart\",{\r\n                params:{count,cid}\r\n            }).then((res)=>{\r\n                 if(res.data.code==-1){\r\n                      this.$router.push(\"/login\");\r\n                 }\r\n            })\r\n        },\r\n        // 删除商品\r\n          remove(e){\r\n               var index=parseInt(e.target.dataset.index);\r\n               var cid=this.products[index].cid;\r\n               this.products.splice(index,1);\r\n               this.axios.get(\"http://localhost:3000/deleteCart\",{\r\n                   params:{cid}\r\n               }).then((res)=>{\r\n                   if(res.data.code==-1){\r\n                       this.$router.push(\"/login\")\r\n                   }\r\n               }) \r\n          },\r\n     },\r\n     watch:{\r\n           isAllSelected(){\r\n                 if(this.isAllSelected){\r\n                      for(var i=0;i<this.products.length;i++){\r\n                        this.products[i].isSelected=this.isAllSelected; \r\n                        this.sum+=this.products[i].new_price*this.products[i].count;\r\n                      }\r\n                 }else{\r\n                        this.sum=0;\r\n                        };\r\n           },\r\n     },\r\n    //  计算属性\r\n    computed:{\r\n       \r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n    .cart{\r\n\t\t    width:1200px;\r\n\t\t\tmargin:10px auto;\r\n\t\t}\r\n    .cart_top>.top_item{\r\n\t\t    display:flex;\r\n\t\t\theight:50px;\r\n\t\t\talign-items:center;\r\n\t\t}\r\n\t.cart_top>.top_item1{\r\n            border-bottom:2px solid #e6e6e6;\r\n\t\t\tfont-size:24px;\r\n\t\t}\r\n\t.cart_top>.top_item1>a{\r\n            width:160px;\r\n\t\t\ttext-align:center;\r\n\t\t}\r\n\t.cart_top>.top_item2>.item2_son{\r\n            padding-left:10px;\r\n\t\t}\r\n\t.cart_top>.top_item2>.item2_son2{\r\n            margin-left:100px;\r\n\t\t\twidth:220px;\r\n\t\t}\r\n\t.cart_top>.top_item2>.item2_son3{\r\n            width:220px;\r\n\t\t}\r\n\t.cart_top .item2_son4,.cart_top .item2_son5,.cart_top .item2_son6{\r\n             width:140px;\r\n\t\t}\r\n\t.cart_top .item2_son7{\r\n            width:120px;\r\n\t\t}\r\n\tul{\r\n            padding:0;\r\n\t\t}\r\n\tul>li{\r\n           list-style:none;\r\n\t\t}\r\n\t.cart_product{\r\n            border:1px solid #ccc;\r\n\t\t}\r\n\t.cart_product>.product{\r\n            display:flex;\r\n\t\t\tpadding:10px;\r\n\t\t\talign-items:flex-start;\r\n\t\t}\r\n\t.cart_product>.product>.product-item{\r\n            padding:0 0 0 20px;\r\n\t\t}\r\n\t.cart_product>.product>.product-item1{\r\n           align-self:center;\r\n\t\t}\r\n    .cart_product>.product>.product-item2{\r\n        width:100px;\r\n    }\r\n\t.cart_product>.product>.product-item2>img{\r\n           width:100px;\r\n\t\t}\r\n\t.cart_product>.product>.product-item3,.cart_product>.product>.product-item4{\r\n           width:200px;\r\n\t\t}\r\n\t.cart_product>.product>.product-item3>p{\r\n            width:100%;\r\n\t\t\t overflow: hidden;\r\n            text-overflow: ellipsis;\r\n           white-space: nowrap;\r\n\t\t}\r\n\t.product>.product-item5,.product>.product-item6,.product>.product-item7{\r\n           width:140px;\r\n\t\t}\r\n\t.product>.product-item5>.new_price{\r\n           font-size:18px;\r\n\t\t}\r\n\t.product>.product-item5>.old_price{\r\n            color:#9c9c9c;\r\n\t\t\tfont-size:14px;\r\n\t\t\ttext-decoration:line-through;\r\n\t\t}\r\n\t.product>.product-item6>.count{\r\n             display:inline-block;\r\n\t\t\t width:30px;\r\n\t\t\t height:30px;\r\n\t\t\t box-sizing:border-box;\r\n\t\t\t border:1px solid #aaa;\r\n\t\t\t padding:1px 0;\r\n             user-select:none;\r\n\t\t\t text-align:center;\r\n\t\t}\r\n\t.product>.product-item6>input{\r\n            width:60px;\r\n\t\t\theight:30px;\r\n            box-sizing:border-box;\r\n            text-align: center;\r\n\t\t}\r\n\t.product>.product-item8{\r\n           width:120px;\r\n\t\t}\r\n\t.cart-bottom{\r\n            height:60px;\r\n\t\t\t display:flex;\r\n\t\t\t align-items:center;\r\n\t\t\t background:#ddd;\r\n\t\t\t position:fixed;\r\n\t\t\t bottom:0;\r\n\t\t\t \r\n\t\t}\r\n\t.cart-bottom>.cart-item{\r\n            text-align:center;\r\n\t\t\tline-height:60px;\r\n\t\t}\r\n\t.cart-bottom>.cart-item1{\r\n            width:100px;\r\n\t\t}\r\n\t.cart-bottom>.cart-item2{\r\n           width:100px;\r\n\t\t}\r\n\t.cart-bottom>.cart-item3{\r\n           width:160px;\r\n\t\t}\r\n\t.cart-bottom>.cart-item4{\r\n           width:100px;\r\n\t\t}\r\n\t.cart-bottom>.cart-item5{\r\n\t\t    margin-left:140px;\r\n            width:200px;\r\n\t\t}\r\n\t.cart-bottom>.cart-item6{\r\n            width:240px;\r\n\t\t}\r\n    .cart-bottom>.cart-item5>span,.cart-bottom>.cart-item6>span{\r\n        color:#f70738;\r\n    }\r\n\t.cart-bottom>.cart-item7{\r\n            width:160px;\r\n\t\t\tcolor:#fff;\r\n\t\t\tbackground:#666;\r\n\t\t\tfont-size:20px;\r\n\t\t\theight:100%;\r\n\t\t}\r\n\t\t\r\n</style>"]}]}